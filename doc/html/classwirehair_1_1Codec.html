<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Omniveyor: wirehair::Codec Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Omniveyor
   </div>
   <div id="projectbrief">Root Repository for the OmniVeyor Robots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>wirehair</b></li><li class="navelem"><a class="el" href="classwirehair_1_1Codec.html">Codec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classwirehair_1_1Codec-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">wirehair::Codec Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0568571b041a1ff15f6ac5814004ec9d"><td class="memItemLeft" align="right" valign="top"><a id="a0568571b041a1ff15f6ac5814004ec9d"></a>
GF256_FORCE_INLINE uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>PSeed</b> () const</td></tr>
<tr class="separator:a0568571b041a1ff15f6ac5814004ec9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167701b82968cccb8955825741dd05ee"><td class="memItemLeft" align="right" valign="top"><a id="a167701b82968cccb8955825741dd05ee"></a>
GF256_FORCE_INLINE uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>CSeed</b> () const</td></tr>
<tr class="separator:a167701b82968cccb8955825741dd05ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3df96c951157479993c7c2da23e648"><td class="memItemLeft" align="right" valign="top"><a id="aaa3df96c951157479993c7c2da23e648"></a>
GF256_FORCE_INLINE uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>BlockCount</b> () const</td></tr>
<tr class="separator:aaa3df96c951157479993c7c2da23e648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5cbd2b4675815022d8d862ed6f75b4"><td class="memItemLeft" align="right" valign="top"><a id="aac5cbd2b4675815022d8d862ed6f75b4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#aac5cbd2b4675815022d8d862ed6f75b4">OverrideSeeds</a> (uint16_t dense_count, uint16_t p_seed, uint16_t d_seed)</td></tr>
<tr class="memdesc:aac5cbd2b4675815022d8d862ed6f75b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow seeds to be overridden. <br /></td></tr>
<tr class="separator:aac5cbd2b4675815022d8d862ed6f75b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef4b7b7cfc0e87b9730d49564504ce73"><td class="memItemLeft" align="right" valign="top"><a id="aef4b7b7cfc0e87b9730d49564504ce73"></a>
WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#aef4b7b7cfc0e87b9730d49564504ce73">InitializeEncoder</a> (uint64_t message_bytes, unsigned block_bytes)</td></tr>
<tr class="memdesc:aef4b7b7cfc0e87b9730d49564504ce73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize encoder mode. <br /></td></tr>
<tr class="separator:aef4b7b7cfc0e87b9730d49564504ce73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5ca5115d0efddaffb6792cf30dd8ed"><td class="memItemLeft" align="right" valign="top">WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#a8b5ca5115d0efddaffb6792cf30dd8ed">EncodeFeed</a> (const void *GF256_RESTRICT message_in)</td></tr>
<tr class="separator:a8b5ca5115d0efddaffb6792cf30dd8ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae70b40cfd3e7c121f204d90c249ba385"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#ae70b40cfd3e7c121f204d90c249ba385">Encode</a> (const uint32_t block_id, void *GF256_RESTRICT block_out, uint32_t out_buffer_bytes)</td></tr>
<tr class="separator:ae70b40cfd3e7c121f204d90c249ba385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1536a2aaccaa76330033f8282789d650"><td class="memItemLeft" align="right" valign="top"><a id="a1536a2aaccaa76330033f8282789d650"></a>
WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#a1536a2aaccaa76330033f8282789d650">InitializeDecoder</a> (uint64_t message_bytes, unsigned block_bytes)</td></tr>
<tr class="memdesc:a1536a2aaccaa76330033f8282789d650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize decoder mode. <br /></td></tr>
<tr class="separator:a1536a2aaccaa76330033f8282789d650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e1e097b3bf9ea6b8d568af537d7868"><td class="memItemLeft" align="right" valign="top">WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#ac1e1e097b3bf9ea6b8d568af537d7868">DecodeFeed</a> (const unsigned block_id, const void *GF256_RESTRICT block_in, const unsigned block_bytes)</td></tr>
<tr class="separator:ac1e1e097b3bf9ea6b8d568af537d7868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a996858c5b5d866072e8c7bb4fd650cb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#a996858c5b5d866072e8c7bb4fd650cb4">GenerateRecoveryBlocks</a> ()</td></tr>
<tr class="separator:a996858c5b5d866072e8c7bb4fd650cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4ec0f47c8c13478886033315700a03"><td class="memItemLeft" align="right" valign="top">WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#a4f4ec0f47c8c13478886033315700a03">ReconstructOutput</a> (void *GF256_RESTRICT message_out, uint64_t message_bytes)</td></tr>
<tr class="separator:a4f4ec0f47c8c13478886033315700a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cc680bffd20cde13b49fc512989f00"><td class="memItemLeft" align="right" valign="top">WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#ae5cc680bffd20cde13b49fc512989f00">ReconstructBlock</a> (const uint16_t block_id, void *GF256_RESTRICT block_out, uint32_t *bytes_out)</td></tr>
<tr class="separator:ae5cc680bffd20cde13b49fc512989f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91efdb2a8659199a8f7b4be503c0c0e8"><td class="memItemLeft" align="right" valign="top">WirehairResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwirehair_1_1Codec.html#a91efdb2a8659199a8f7b4be503c0c0e8">InitializeEncoderFromDecoder</a> ()</td></tr>
<tr class="separator:a91efdb2a8659199a8f7b4be503c0c0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac1e1e097b3bf9ea6b8d568af537d7868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1e1e097b3bf9ea6b8d568af537d7868">&#9670;&nbsp;</a></span>DecodeFeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WirehairResult wirehair::Codec::DecodeFeed </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>block_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *GF256_RESTRICT&#160;</td>
          <td class="paramname"><em>block_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>block_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classwirehair_1_1Codec.html#ac1e1e097b3bf9ea6b8d568af537d7868">DecodeFeed()</a></p>
<p>This function accumulates the new block in a large staging buffer. As soon as N blocks are collected, SolveMatrix() is run. After N blocks, ResumeSolveMatrix() is run. </p>

</div>
</div>
<a id="ae70b40cfd3e7c121f204d90c249ba385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae70b40cfd3e7c121f204d90c249ba385">&#9670;&nbsp;</a></span>Encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wirehair::Codec::Encode </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>block_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *GF256_RESTRICT&#160;</td>
          <td class="paramname"><em>block_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>out_buffer_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classwirehair_1_1Codec.html#ae70b40cfd3e7c121f204d90c249ba385">Encode()</a></p>
<p>This function encodes a block. For the first N blocks it simply copies the input to the output block. For other block identifiers, it will generate a new random row and sum together recovery blocks to produce the new block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block_id</td><td>Block id to generate </td></tr>
    <tr><td class="paramname">block_out</td><td>Block data output </td></tr>
    <tr><td class="paramname">out_buffer_bytes</td><td>Output buffer bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8b5ca5115d0efddaffb6792cf30dd8ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b5ca5115d0efddaffb6792cf30dd8ed">&#9670;&nbsp;</a></span>EncodeFeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WirehairResult wirehair::Codec::EncodeFeed </td>
          <td>(</td>
          <td class="paramtype">const void *GF256_RESTRICT&#160;</td>
          <td class="paramname"><em>message_in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classwirehair_1_1Codec.html#a8b5ca5115d0efddaffb6792cf30dd8ed">EncodeFeed()</a></p>
<p>This function breaks the input message up into blocks and opportunistically peels with each one. After processing all of the blocks from the input, it runs the matrix solver and if the solver succeeds, it generates the recovery blocks.</p>
<p>In practice, the solver should always succeed because the encoder should be looking up its matrix parameters from a table, which guarantees the matrix is invertible. </p>

</div>
</div>
<a id="a996858c5b5d866072e8c7bb4fd650cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a996858c5b5d866072e8c7bb4fd650cb4">&#9670;&nbsp;</a></span>GenerateRecoveryBlocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wirehair::Codec::GenerateRecoveryBlocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classwirehair_1_1Codec.html#a996858c5b5d866072e8c7bb4fd650cb4">GenerateRecoveryBlocks()</a></p>
<p>This function generates the recovery blocks after the Triangle() function succeeds in solving the matrix.</p>
<p>It performs the final Substitution step:</p>
<p>(4) Substitution: </p><pre class="fragment">Solves across GE matrix rows:

    InitializeColumnValues()
    MultiplyDenseValues()
    AddSubdiagonalValues()

Solves up GE matrix columns:

    BackSubstituteAboveDiagonal()

Solves remaining columns:

    Substitute()
</pre> 
</div>
</div>
<a id="a91efdb2a8659199a8f7b4be503c0c0e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91efdb2a8659199a8f7b4be503c0c0e8">&#9670;&nbsp;</a></span>InitializeEncoderFromDecoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WirehairResult wirehair::Codec::InitializeEncoderFromDecoder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transition from decoder to encoder mode Precondition: <a class="el" href="classwirehair_1_1Codec.html#ac1e1e097b3bf9ea6b8d568af537d7868">DecodeFeed()</a> succeeded with Wirehair_Success </p>

</div>
</div>
<a id="ae5cc680bffd20cde13b49fc512989f00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5cc680bffd20cde13b49fc512989f00">&#9670;&nbsp;</a></span>ReconstructBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WirehairResult wirehair::Codec::ReconstructBlock </td>
          <td>(</td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>block_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *GF256_RESTRICT&#160;</td>
          <td class="paramname"><em>block_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>bytes_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classwirehair_1_1Codec.html#ae5cc680bffd20cde13b49fc512989f00">ReconstructBlock()</a></p>
<p>This function reconstructs an original block from the recovery blocks, which is much slower than copying from the input data, so should be done selectively. This is only done during decoding.</p>
<p>Precondition: <a class="el" href="classwirehair_1_1Codec.html#ac1e1e097b3bf9ea6b8d568af537d7868">DecodeFeed()</a> has returned success</p>
<p>Returns Wirehair_Success on success.</p><ul>
<li>block_out will be filled with the reconstructed block</li>
<li>bytes_out will be the number of bytes in the block</li>
</ul>
<p>Returns other codes on error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block_id</td><td>Block identifier </td></tr>
    <tr><td class="paramname">block_out</td><td>Output block memory </td></tr>
    <tr><td class="paramname">bytes_out</td><td>Bytes written to output </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4f4ec0f47c8c13478886033315700a03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f4ec0f47c8c13478886033315700a03">&#9670;&nbsp;</a></span>ReconstructOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WirehairResult wirehair::Codec::ReconstructOutput </td>
          <td>(</td>
          <td class="paramtype">void *GF256_RESTRICT&#160;</td>
          <td class="paramname"><em>message_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>message_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classwirehair_1_1Codec.html#a4f4ec0f47c8c13478886033315700a03">ReconstructOutput()</a></p>
<p>This function reconstructs the output by copying inputs that were from the first N blocks, and regenerating the rest. This is only done during decoding.</p>
<p>Precondition: <a class="el" href="classwirehair_1_1Codec.html#ac1e1e097b3bf9ea6b8d568af537d7868">DecodeFeed()</a> has returned success </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nimbro_network/nimbro_topic_transport/contrib/wirehair/<a class="el" href="WirehairCodec_8h_source.html">WirehairCodec.h</a></li>
<li>nimbro_network/nimbro_topic_transport/contrib/wirehair/<a class="el" href="WirehairCodec_8cpp.html">WirehairCodec.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
