<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Omniveyor: The Position-based Type II On-Line Trajectory Generation Algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Omniveyor
   </div>
   <div id="projectbrief">Root Repository for the OmniVeyor Robots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The Position-based Type II On-Line Trajectory Generation Algorithm </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page contains four sections<br  />
<br  />
 </p><ul>
<li>
sec_BriefIntroduction<br  />
<br  />
 </li>
<li>
sec_Step1<br  />
<br  />
 </li>
<li>
sec_Step2<br  />
<br  />
 </li>
<li>
sec_Step3<br  />
<br  />
 </li>
</ul>
<hr  />
<h1><a class="anchor" id="sec_BriefIntroduction"></a>
A Brief Introduction</h1>
<div class="image">
<img src="RMLBasicPositionTypeIIColor.png" alt=""/>
<div class="caption">
Input and output values of the <em>Reflexxes</em> <em>Type</em> <em>II</em> <em>Motion</em> <em>Library</em> in a generic manner.</div></div>
<p>The interface (<a class="el" href="classReflexxesAPI.html" title="This class constitutes the API of the Reflexxes Motion Libraries">ReflexxesAPI</a>) of all <em>Reflexxes</em> <em>Motion</em> <em>Libraries</em> is very simple and can easily be integrated into existing systems. Based on the <em>current</em> <em>state</em> <em>of</em> <em>motion</em> and the <em>kinematic</em> <em>motion</em> <em>constraints</em>, a <em>new</em> <em>state</em> <em>of</em> <em>motion</em> is calculated with lies exactly on the time-optimal trajectory to reach the desired <em>target</em> <em>state</em> <em>of</em> <em>motion</em>. All input values can change arbitrarily based on sensor signals and even discontinuously, and a steady jerk-limited motion trajectory is always <em>guaranteed</em> at the output The above figure shows the input and output values of the RML algorithm in a generic manner. It is the task of the algorithm to time-optimally transfer an arbitrary current state of motion<br  />
<br  />
 </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf M}_{i}\,=\,\left(\vec{P}_{i},\, \vec{V}_{i},\, \vec{A}_{i} \right) \]" src="form_0.png"/>
</p>
<p> <br  />
into the desired target state of motion<br  />
<br  />
 </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf M}_{i}^{\,trgt}\,=\,\left(\vec{P}_{i}^{\,trgt},\, \vec{V}_{i}^{\,trgt},\, \vec{0} \right) \]" src="form_1.png"/>
</p>
<p> <br  />
under consideration of the kinematic motion constraints<br  />
<br  />
 </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\bf B}_{i}\,=\,\left( \vec{V}_{i}^{\,max},\, \vec{A}_{i}^{\,max},\, \vec{J}_{i}^{\,max} \right) \]" src="form_2.png"/>
</p>
<p><br  />
<br  />
The algorithm works memoryless and calculates only the next state of motion <img class="formulaInl" alt="$ {\bf M}_{i+1} $" src="form_3.png"/>, which is used as input value for lower-level motion controllers. The resulting trajectories are time-optimal and synchronized, such that all selected DOFs coinstantaneously reach their target state of motion. The selection vector <img class="formulaInl" alt="$ \vec{S}_i $" src="form_4.png"/> contains boolean values to mask single DOFs, for which no output values are calculated. All types and variant of the algorithm consist of three steps, which are introduced in the following.<br  />
</p>
<p><br  />
<br  />
 For a better understanding of the basic algorithm for Type II On-Line Trajectory generation (<a class="el" href="classOTG.html">OTG</a>), this section presents a brief overview. For a detailed description, please refer to<br  />
<br  />
<b>T. Kroeger.</b><br  />
<b>On-Line Trajectory Generation in Robotic Systems.</b><br  />
<b>Springer Tracts in Advanced Robotics, Vol. 58, Springer, January 2010.</b><br  />
<b><a href="http://www.springer.com/978-3-642-05174-6" target="_blank" title="You may order your personal copy at www.springer.com.">http://www.springer.com/978-3-642-05174-6</a></b><br  />
<br  />
 <br  />
<br  />
 </p><hr  />
<h1><a class="anchor" id="sec_Step1"></a>
Step 1: Calculate the Synchronization Time</h1>
<p>Although only one single scalar value is calculate in this step, it the the most complex one. First, the minimum execution times <img class="formulaInl" alt="$ _kt_{i}^{\,min} $" src="form_5.png"/> are calculated for each selected DOF <img class="formulaInl" alt="$ k \ \in\ \{1,\dots,K\}$" src="form_6.png"/>. The value of the minimum synchronization time <img class="formulaInl" alt="$ t_i^{\,sync} $" src="form_7.png"/> must be equal or greater than the minimum value of all minimum execution times. To transfer the motion state of one DOF to another, a finite set of motion profiles <img class="formulaInl" alt="$ {\cal P}_{Step1} $" src="form_8.png"/> is considered, and a decision tree selects a motion profile <img class="formulaInl" alt="$ _k\Psi_i^{\,Step1}\ \in\ {\cal P}_{Step1} $" src="form_9.png"/> for each selected DOF <img class="formulaInl" alt="$ k \ \in\ \{1,\dots,K\} $" src="form_10.png"/>. To calculate <img class="formulaInl" alt="$ _kt_{i}^{\,min} $" src="form_5.png"/>, a system of nonlinear equation is set-up, and the solution contains the desired value.<br  />
<br  />
Depending on the type of the algorithm (I-IX), it may happen that up to <img class="formulaInl" alt="$ Z\,=\,3 $" src="form_11.png"/> time intervals are existent, within which the target state of motion cannot be reached. For the Type II algorithm only <img class="formulaInl" alt="$ Z\,=\,1 $" src="form_12.png"/> inoperative interval may be existent. The decision trees 1B and 1C are used to calculate all limits of these intervals <img class="formulaInl" alt="$ _k{\cal Z}_{i} $" src="form_13.png"/>, whose elements are denoted by<br  />
<br  />
 </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ _k^z\zeta_{i}\,=\,\left[^z_kt_{i}^{\,begin},\,^z_kt_{i}^{\,end}\right],\ \mbox{with}\ z\ \in\ \left\{1,\,\dots,\,Z\right\} \]" src="form_14.png"/>
</p>
<p><br  />
<br  />
Finally, the minimum time not being within any inoperative time interval<br  />
<br  />
 </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ _k^z\zeta_{i}\ \forall\ (z,\,k)\ \in \ \left\{1,\,\dots,\,Z\right\}\times\left\{1,\,\dots,\,K\right\} \]" src="form_15.png"/>
</p>
<p> <br  />
<br  />
is selected as the value for the synchronization time <img class="formulaInl" alt="$ t_i^{\,sync} $" src="form_7.png"/>.</p>
<p><br  />
<br  />
 </p><hr  />
<h1><a class="anchor" id="sec_Step2"></a>
Step 2: Synchronization of All Selected DOFs</h1>
<p>All selected DOFs that did not determine <img class="formulaInl" alt="$ t_i^{\,sync} $" src="form_7.png"/> have to be synchronized to this time value. In principal, an infinite number of solutions can be found to parameterize a trajectory that transfers such a DOF from <img class="formulaInl" alt="$ _k\vec{M}_i $" src="form_16.png"/> to <img class="formulaInl" alt="$ _k\vec{M}_i^{\,trgt} $" src="form_17.png"/> in <img class="formulaInl" alt="$ t_i^{\,sync} $" src="form_7.png"/>. In order to achieve a deterministic framework, an optimization criterion must be used in order to compute a <em>time-</em> or a <em>phase-synchronized</em> motion trajectory. Therefore, another decision tree is used, which selects a motion profile <img class="formulaInl" alt="$ _k\Psi_i^{\,Step2} $" src="form_18.png"/> for each DOF <img class="formulaInl" alt="$ k $" src="form_19.png"/> from a different set that is denoted by <img class="formulaInl" alt="$ {\cal P}_{Step2} $" src="form_20.png"/>. Based on this profile, a nonlinear system of equations can be solved, and the solution contains all required parameters for the synchronized motion trajectory.</p>
<p><br  />
<br  />
 </p><hr  />
<h1><a class="anchor" id="sec_Step3"></a>
Step 3: Calculate Output Values</h1>
<p>This last step is trivial: the resulting trajectory parameters of Step 2 are used to calculate a new state of motion <img class="formulaInl" alt="$ {\bf M}_{i+1} $" src="form_3.png"/>, which is used as set-point for lower-level controllers at <img class="formulaInl" alt="$ T_{i+1}$" src="form_21.png"/>.<br  />
</p>
<div class="image">
<img src="GenericStructogram.png" alt=""/>
<div class="caption">
Nassi-Shneiderman structogram of the basic OTG algorithm.</div></div>
<p>The figure above summarizes the generic version of the <a class="el" href="classOTG.html">OTG</a> algorithm for time-synchronization, while the figure below summarizes the version, in which phase-synchronization is applied.<br  />
</p>
<div class="image">
<img src="GenericStructogramPS.png" alt=""/>
<div class="caption">
Generic Nassi-Shneiderman structogram for the OTG algorithm for phase-synchronized trajectories.</div></div>
<p>The class <a class="el" href="classReflexxesAPI.html" title="This class constitutes the API of the Reflexxes Motion Libraries">ReflexxesAPI</a> constitutes the actual user interface and provides the complete set of functionalities while hiding all parts of the library that are not required by the user. Users, who like to take a deeper look to the implementation of the algorithm, may learn about the class <a class="el" href="classTypeIIRMLPosition.html" title="This class constitutes the low-level user interface of the Reflexxes Type II Motion Library,...">TypeIIRMLPosition</a> and the namespace TypeIIRMLMath, both of which contain all mathematical details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
