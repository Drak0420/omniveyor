Root Repository for the Omni\+Veyor Robots.\hypertarget{md_README_autotoc_md26}{}\doxysection{Robot configuration}\label{md_README_autotoc_md26}
\hypertarget{md_README_autotoc_md27}{}\doxysubsubsection{Hardware Setup}\label{md_README_autotoc_md27}

\begin{DoxyItemize}
\item Remove top panel and rear panel.
\item Remove U\+PS and short the two pairs of wires with two connection blocks (+ with +, -\/ with -\/)
\item Install S\+SD and P\+C\+I-\/e to U\+SB 3.\+0 card inside the robot computer. Remove the dedicated graphics card to make room for the U\+SB 3.\+0 card.
\item Install Hokuyo U\+S\+T-\/10\+LX Li\+D\+AR, Power the Li\+D\+AR from terminals (+12V and G\+ND).
\item Install Arduino and custom function button. Button connects to Pin D8 and G\+ND. L\+ED on the button (5V) connects to D11 and G\+ND.
\item Install wireless charger. The receiver side of the charger has two power lines and three signal lines. Connect Power Red to Battery + (red), Power Black to Battery -\/ (black). Connect Signal Brown (Control) to Arduino D12, Signal Yellow (Fault) to Arduino D13, and Signal Blue (G\+ND) to Arduino G\+ND.
\item Check and set servo motor I\+Ds. Front Right Steer -\/ 1, Front Right Roll -\/ 2, Front Left Steer -\/ 3, Front Left Roll -\/ 4, ..., Rear Right Roll -\/ 8.
\item Install Real\+Sense Cameras. Front Left\+: D435i. Front Right\+: T265. Rear Right\+: D435i (optional). Connect the U\+SB cables to the U\+SB 3.\+0 card. From left to right the order is\+: T265, No Connection, Rear D435i, Front D435i.
\end{DoxyItemize}\hypertarget{md_README_autotoc_md28}{}\doxysubsubsection{Install Linux System}\label{md_README_autotoc_md28}
Recommended\+: {\ttfamily Lubuntu 20.\+04} or {\ttfamily Kubuntu 20.\+04}.

L\+X\+Qt / K\+DE + S\+D\+DM uses significantly less R\+AM and C\+PU resources than the default Gnome desktop in Ubuntu 20.\+04.

{\itshape Specific to the A\+D\+Link M\+X\+C6300 machine on the robot}
\begin{DoxyItemize}
\item Pre-\/installation\+: Hold {\ttfamily Del} key to enter B\+I\+OS. Find Advanced $>$ Advanced Power Management $>$ Restore AC Power Loss. Set to {\ttfamily Power On}.
\item Find Chipset $>$ Primary I\+G\+FX Boot Display. Set to {\ttfamily D\+P1}. Then find Active L\+FP and set to {\ttfamily Int-\/\+L\+V\+DS}. Set the L\+CD Panel Type to the desired resolution resolution ({\ttfamily 1920x1080 L\+V\+DS} for example). This option creates a virtual screen for graphical display when the robot is running headless.
\item Insert installation media. Press {\ttfamily F4} key to Save and Reset.
\item Installation\+: Hold {\ttfamily Del} to enter B\+I\+OS. In the Save and Exit tab, find the installation media and override boot order.
\item Enter live session and install system. In case the virtual screen is recognized as the main screen and you see a blank desktop, use the following key order to invoke monitor setting\+: {\ttfamily Windows}, {\ttfamily m}, {\ttfamily o}, {\ttfamily n}, {\ttfamily up}, {\ttfamily Enter} In the opened window select {\ttfamily Unified View}.
\end{DoxyItemize}\hypertarget{md_README_autotoc_md29}{}\doxysubsubsection{Setup Linux System}\label{md_README_autotoc_md29}

\begin{DoxyItemize}
\item This section assumes you have already installed Lubuntu 20.\+04, or equivalent flavors with S\+D\+DM desktop manager.
\item Clone this repository to {\ttfamily $\sim$/\+Dev}, for example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{mkdir -\/p \string~/Dev/ros\_ws/src}
\DoxyCodeLine{cd \string~/Dev/ros\_ws/src}
\DoxyCodeLine{git clone https://github.com/HaoguangYang/omniveyor.git}
\end{DoxyCode}

\item {\bfseries{In the {\ttfamily ros\+\_\+ws} folder}}, run the all-\/in-\/one \href{https://github.com/HaoguangYang/omniveyor/blob/master/systemInitialSetup.sh}{\texttt{ setup script}}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{cd ..; ./src/omniveyor/systemInitialSetup.sh}
\end{DoxyCode}

\item Sit back and relax!
\end{DoxyItemize}\hypertarget{md_README_autotoc_md30}{}\doxysubsubsection{File Structure}\label{md_README_autotoc_md30}

\begin{DoxyCode}{0}
\DoxyCodeLine{ros\_ws/src/}
\DoxyCodeLine{      |-\/-\/-\/omniveyor <This repository>}
\DoxyCodeLine{      |   |-\/-\/-\/omniveyor\_mobility (High-\/level package for mapping, localization, and navigation)}
\DoxyCodeLine{      |   |-\/-\/-\/spatio\_temporal\_voxel\_layer (MoveBase plugin for spatio voxel cloud generation and obstacle avoidance)}
\DoxyCodeLine{      |   -\/-\/-\/-\/nimbro\_network (Multi ROS master communication infrastructure)}
\DoxyCodeLine{      |-\/-\/-\/omniveyor\_common (Common definitions, message types, and definitions across hardware and simulator)}
\DoxyCodeLine{      |-\/-\/-\/omniveyor\_hardware}
\DoxyCodeLine{      |   |-\/-\/-\/pcv\_base (Robot base driver)}
\DoxyCodeLine{      |   |-\/-\/-\/<Placeholder for future hardware>}
\DoxyCodeLine{      |   -\/-\/-\/-\/robot\_localization (Odometer filtering tools -\/-\/ EKF, UKF, etc.)}
\DoxyCodeLine{      -\/-\/-\/-\/omniveyor\_simulator}
\DoxyCodeLine{          |-\/-\/-\/omniveyor\_gazebo\_world (Robot simulator main)}
\DoxyCodeLine{          -\/-\/-\/-\/realsense\_ros\_gazebo (Plugin for Realsense simulation)}
\end{DoxyCode}
\hypertarget{md_README_autotoc_md31}{}\doxysubsubsection{Debugging and Troubleshooting}\label{md_README_autotoc_md31}

\begin{DoxyItemize}
\item To debug C\+AN bus, use candump\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{candump -\/ax can0}
\end{DoxyCode}


The documentation for the i\+P\+OS motor controller C\+AN protocol can be found \href{http://www.technosoft.ro/KB/index.php?/getAttach/46/AA-15445/P091.063.CANopen.iPOS.UM.pdf}{\texttt{ H\+E\+RE}}.
\item If canbus keeps dropping frames, may need to manually address QoS strategy in {\ttfamily /etc/systemd/system/canbus.service}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\# change congestion control method for CAN0 to ensure data packets are not stale under congestion.}
\DoxyCodeLine{ExecStartPre=... \&\& tc qdisc add dev can0 root handle 1: pfifo\_head\_drop limit 9}
\end{DoxyCode}

\item If you are using Gnome desktop manager, comment out the {\ttfamily x11vnc} section of the {\ttfamily ./system\+Initial\+Setup.sh} script, and use the inbuilt Vino server instead. The V\+NC server is started through Settings $>$ Sharing $>$ Desktop Sharing.

{\itshape Optional} enable access of V\+NC through Windows machines by turning off encryption ({\bfseries{NO sudo}})\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{gsettings set org.gnome.Vino require-\/encryption false}
\end{DoxyCode}

\item If Wi\+Fi dongle works below expectation, you may try to use third-\/party driver, e.\+g. \href{https://github.com/aircrack-ng/rtl8188eus}{\texttt{ Aircrack-\/ng\textquotesingle{}s R\+TL 8188E\+US driver}} for better Wi\+Fi connection.
\item {\ttfamily qterminal} may be swapped by {\ttfamily xterm} in some occasions during the installation of {\ttfamily ros-\/noetic-\/fkie-\/multimaster}. If you feel uncomfortable, do\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{sudo mv /usr/bin/xterm /usr/bin/xterm.old \&\& sudo ln -\/s /usr/bin/qterminal /usr/bin/xterm}
\end{DoxyCode}

\item {\bfseries{Deprecated, Use with Caution}} This repository includes a bootup script, such that the S\+SH and V\+NC ports of the cart are mapped to a Virtual Private Server with static IP. To enable the automatic bootup sequence, add the following line in {\ttfamily crontab -\/e}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{@reboot sleep 30; cd /home/cartman/Dev/Mobile\_Manipulation\_Dev/; sh ./onBoot.sh}
\end{DoxyCode}


{\bfseries{W\+A\+R\+N\+I\+NG\+:}} The program will run 30s after the machine is booted up. Plugging in a joystick will mobilize the robot. Refer to {\ttfamily autorun.\+py} (under {\ttfamily src/pcv\+\_\+base/scripts}) for series of commands it executes.
\end{DoxyItemize}\hypertarget{md_README_autotoc_md32}{}\doxysubsubsection{Compile and run the code\+:}\label{md_README_autotoc_md32}

\begin{DoxyCode}{0}
\DoxyCodeLine{catkin\_make -\/DCMAKE\_BUILD\_TYPE=Release}
\end{DoxyCode}


Then run the ros package {\ttfamily pcv\+\_\+base}.

{\bfseries{Deprecated}} Automatic run procedure is defined in the autorun.\+py, which structures a move of the robot as a \char`\"{}task\char`\"{}, as defined in the {\ttfamily pcv\+\_\+base/scripts} folder\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{autorun.py -\/-\/(imports)-\/-\/> task -\/-\/(imports)-\/-\/> payload}
\DoxyCodeLine{                            |-\/-\/-\/-\/(calls)-\/-\/> launch}
\DoxyCodeLine{                            |-\/-\/-\/-\/(uses)-\/-\/> resources}
\end{DoxyCode}
\hypertarget{md_README_autotoc_md33}{}\doxysection{Base Station configuration}\label{md_README_autotoc_md33}
\hypertarget{md_README_autotoc_md34}{}\doxysubsubsection{Connect to the robot with Remote R\+O\+S Master}\label{md_README_autotoc_md34}

\begin{DoxyCode}{0}
\DoxyCodeLine{export ROS\_MASTER\_URI=\$Robot\_IP\_Addr\_Here}
\DoxyCodeLine{export ROS\_IP=\$Your\_IP\_Here}
\end{DoxyCode}


If {\ttfamily rostopic list} works but no message comes through, check {\ttfamily R\+O\+S\+\_\+\+IP} or {\ttfamily R\+O\+S\+\_\+\+H\+O\+S\+T\+N\+A\+ME} setting on the robot side.\hypertarget{md_README_autotoc_md35}{}\doxysubsubsection{Connect to the robot with $<$tt$>$nimbro\+\_\+network$<$/tt$>$}\label{md_README_autotoc_md35}
On the base station side\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{roslaunch omniveyor\_mobility multi\_robot\_p2p\_onHost.launch}
\end{DoxyCode}


On the robot side\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{roslaunch pcv\_base multi\_robot\_p2p.launch}
\end{DoxyCode}


W\+IP\hypertarget{md_README_autotoc_md36}{}\doxysection{Simulator Configuration}\label{md_README_autotoc_md36}
W\+IP 