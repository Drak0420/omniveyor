\hypertarget{classwirehair_1_1Codec}{}\doxysection{wirehair\+::Codec Class Reference}
\label{classwirehair_1_1Codec}\index{wirehair::Codec@{wirehair::Codec}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classwirehair_1_1Codec_a0568571b041a1ff15f6ac5814004ec9d}\label{classwirehair_1_1Codec_a0568571b041a1ff15f6ac5814004ec9d}} 
G\+F256\+\_\+\+F\+O\+R\+C\+E\+\_\+\+I\+N\+L\+I\+NE uint32\+\_\+t {\bfseries P\+Seed} () const
\item 
\mbox{\Hypertarget{classwirehair_1_1Codec_a167701b82968cccb8955825741dd05ee}\label{classwirehair_1_1Codec_a167701b82968cccb8955825741dd05ee}} 
G\+F256\+\_\+\+F\+O\+R\+C\+E\+\_\+\+I\+N\+L\+I\+NE uint32\+\_\+t {\bfseries C\+Seed} () const
\item 
\mbox{\Hypertarget{classwirehair_1_1Codec_aaa3df96c951157479993c7c2da23e648}\label{classwirehair_1_1Codec_aaa3df96c951157479993c7c2da23e648}} 
G\+F256\+\_\+\+F\+O\+R\+C\+E\+\_\+\+I\+N\+L\+I\+NE uint32\+\_\+t {\bfseries Block\+Count} () const
\item 
\mbox{\Hypertarget{classwirehair_1_1Codec_aac5cbd2b4675815022d8d862ed6f75b4}\label{classwirehair_1_1Codec_aac5cbd2b4675815022d8d862ed6f75b4}} 
void \mbox{\hyperlink{classwirehair_1_1Codec_aac5cbd2b4675815022d8d862ed6f75b4}{Override\+Seeds}} (uint16\+\_\+t dense\+\_\+count, uint16\+\_\+t p\+\_\+seed, uint16\+\_\+t d\+\_\+seed)
\begin{DoxyCompactList}\small\item\em Allow seeds to be overridden. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classwirehair_1_1Codec_aef4b7b7cfc0e87b9730d49564504ce73}\label{classwirehair_1_1Codec_aef4b7b7cfc0e87b9730d49564504ce73}} 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_aef4b7b7cfc0e87b9730d49564504ce73}{Initialize\+Encoder}} (uint64\+\_\+t message\+\_\+bytes, unsigned block\+\_\+bytes)
\begin{DoxyCompactList}\small\item\em Initialize encoder mode. \end{DoxyCompactList}\item 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_a8b5ca5115d0efddaffb6792cf30dd8ed}{Encode\+Feed}} (const void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT message\+\_\+in)
\item 
uint32\+\_\+t \mbox{\hyperlink{classwirehair_1_1Codec_ae70b40cfd3e7c121f204d90c249ba385}{Encode}} (const uint32\+\_\+t block\+\_\+id, void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT block\+\_\+out, uint32\+\_\+t out\+\_\+buffer\+\_\+bytes)
\item 
\mbox{\Hypertarget{classwirehair_1_1Codec_a1536a2aaccaa76330033f8282789d650}\label{classwirehair_1_1Codec_a1536a2aaccaa76330033f8282789d650}} 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_a1536a2aaccaa76330033f8282789d650}{Initialize\+Decoder}} (uint64\+\_\+t message\+\_\+bytes, unsigned block\+\_\+bytes)
\begin{DoxyCompactList}\small\item\em Initialize decoder mode. \end{DoxyCompactList}\item 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}{Decode\+Feed}} (const unsigned block\+\_\+id, const void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT block\+\_\+in, const unsigned block\+\_\+bytes)
\item 
void \mbox{\hyperlink{classwirehair_1_1Codec_a996858c5b5d866072e8c7bb4fd650cb4}{Generate\+Recovery\+Blocks}} ()
\item 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_a4f4ec0f47c8c13478886033315700a03}{Reconstruct\+Output}} (void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT message\+\_\+out, uint64\+\_\+t message\+\_\+bytes)
\item 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_ae5cc680bffd20cde13b49fc512989f00}{Reconstruct\+Block}} (const uint16\+\_\+t block\+\_\+id, void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT block\+\_\+out, uint32\+\_\+t $\ast$bytes\+\_\+out)
\item 
Wirehair\+Result \mbox{\hyperlink{classwirehair_1_1Codec_a91efdb2a8659199a8f7b4be503c0c0e8}{Initialize\+Encoder\+From\+Decoder}} ()
\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}\label{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}} 
\index{wirehair::Codec@{wirehair::Codec}!DecodeFeed@{DecodeFeed}}
\index{DecodeFeed@{DecodeFeed}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{DecodeFeed()}{DecodeFeed()}}
{\footnotesize\ttfamily Wirehair\+Result wirehair\+::\+Codec\+::\+Decode\+Feed (\begin{DoxyParamCaption}\item[{const unsigned}]{block\+\_\+id,  }\item[{const void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT}]{block\+\_\+in,  }\item[{const unsigned}]{block\+\_\+bytes }\end{DoxyParamCaption})}

\mbox{\hyperlink{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}{Decode\+Feed()}}

This function accumulates the new block in a large staging buffer. As soon as N blocks are collected, Solve\+Matrix() is run. After N blocks, Resume\+Solve\+Matrix() is run. \mbox{\Hypertarget{classwirehair_1_1Codec_ae70b40cfd3e7c121f204d90c249ba385}\label{classwirehair_1_1Codec_ae70b40cfd3e7c121f204d90c249ba385}} 
\index{wirehair::Codec@{wirehair::Codec}!Encode@{Encode}}
\index{Encode@{Encode}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{Encode()}{Encode()}}
{\footnotesize\ttfamily uint32\+\_\+t wirehair\+::\+Codec\+::\+Encode (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{block\+\_\+id,  }\item[{void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT}]{block\+\_\+out,  }\item[{uint32\+\_\+t}]{out\+\_\+buffer\+\_\+bytes }\end{DoxyParamCaption})}

\mbox{\hyperlink{classwirehair_1_1Codec_ae70b40cfd3e7c121f204d90c249ba385}{Encode()}}

This function encodes a block. For the first N blocks it simply copies the input to the output block. For other block identifiers, it will generate a new random row and sum together recovery blocks to produce the new block. 
\begin{DoxyParams}{Parameters}
{\em block\+\_\+id} & Block id to generate \\
\hline
{\em block\+\_\+out} & Block data output \\
\hline
{\em out\+\_\+buffer\+\_\+bytes} & Output buffer bytes \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classwirehair_1_1Codec_a8b5ca5115d0efddaffb6792cf30dd8ed}\label{classwirehair_1_1Codec_a8b5ca5115d0efddaffb6792cf30dd8ed}} 
\index{wirehair::Codec@{wirehair::Codec}!EncodeFeed@{EncodeFeed}}
\index{EncodeFeed@{EncodeFeed}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{EncodeFeed()}{EncodeFeed()}}
{\footnotesize\ttfamily Wirehair\+Result wirehair\+::\+Codec\+::\+Encode\+Feed (\begin{DoxyParamCaption}\item[{const void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT}]{message\+\_\+in }\end{DoxyParamCaption})}

\mbox{\hyperlink{classwirehair_1_1Codec_a8b5ca5115d0efddaffb6792cf30dd8ed}{Encode\+Feed()}}

This function breaks the input message up into blocks and opportunistically peels with each one. After processing all of the blocks from the input, it runs the matrix solver and if the solver succeeds, it generates the recovery blocks.

In practice, the solver should always succeed because the encoder should be looking up its matrix parameters from a table, which guarantees the matrix is invertible. \mbox{\Hypertarget{classwirehair_1_1Codec_a996858c5b5d866072e8c7bb4fd650cb4}\label{classwirehair_1_1Codec_a996858c5b5d866072e8c7bb4fd650cb4}} 
\index{wirehair::Codec@{wirehair::Codec}!GenerateRecoveryBlocks@{GenerateRecoveryBlocks}}
\index{GenerateRecoveryBlocks@{GenerateRecoveryBlocks}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{GenerateRecoveryBlocks()}{GenerateRecoveryBlocks()}}
{\footnotesize\ttfamily void wirehair\+::\+Codec\+::\+Generate\+Recovery\+Blocks (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\hyperlink{classwirehair_1_1Codec_a996858c5b5d866072e8c7bb4fd650cb4}{Generate\+Recovery\+Blocks()}}

This function generates the recovery blocks after the Triangle() function succeeds in solving the matrix.

It performs the final Substitution step\+:

(4) Substitution\+: \begin{DoxyVerb}Solves across GE matrix rows:

    InitializeColumnValues()
    MultiplyDenseValues()
    AddSubdiagonalValues()

Solves up GE matrix columns:

    BackSubstituteAboveDiagonal()

Solves remaining columns:

    Substitute()
\end{DoxyVerb}
 \mbox{\Hypertarget{classwirehair_1_1Codec_a91efdb2a8659199a8f7b4be503c0c0e8}\label{classwirehair_1_1Codec_a91efdb2a8659199a8f7b4be503c0c0e8}} 
\index{wirehair::Codec@{wirehair::Codec}!InitializeEncoderFromDecoder@{InitializeEncoderFromDecoder}}
\index{InitializeEncoderFromDecoder@{InitializeEncoderFromDecoder}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{InitializeEncoderFromDecoder()}{InitializeEncoderFromDecoder()}}
{\footnotesize\ttfamily Wirehair\+Result wirehair\+::\+Codec\+::\+Initialize\+Encoder\+From\+Decoder (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Transition from decoder to encoder mode Precondition\+: \mbox{\hyperlink{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}{Decode\+Feed()}} succeeded with Wirehair\+\_\+\+Success \mbox{\Hypertarget{classwirehair_1_1Codec_ae5cc680bffd20cde13b49fc512989f00}\label{classwirehair_1_1Codec_ae5cc680bffd20cde13b49fc512989f00}} 
\index{wirehair::Codec@{wirehair::Codec}!ReconstructBlock@{ReconstructBlock}}
\index{ReconstructBlock@{ReconstructBlock}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{ReconstructBlock()}{ReconstructBlock()}}
{\footnotesize\ttfamily Wirehair\+Result wirehair\+::\+Codec\+::\+Reconstruct\+Block (\begin{DoxyParamCaption}\item[{const uint16\+\_\+t}]{block\+\_\+id,  }\item[{void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT}]{block\+\_\+out,  }\item[{uint32\+\_\+t $\ast$}]{bytes\+\_\+out }\end{DoxyParamCaption})}

\mbox{\hyperlink{classwirehair_1_1Codec_ae5cc680bffd20cde13b49fc512989f00}{Reconstruct\+Block()}}

This function reconstructs an original block from the recovery blocks, which is much slower than copying from the input data, so should be done selectively. This is only done during decoding.

Precondition\+: \mbox{\hyperlink{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}{Decode\+Feed()}} has returned success

Returns Wirehair\+\_\+\+Success on success.
\begin{DoxyItemize}
\item block\+\_\+out will be filled with the reconstructed block
\item bytes\+\_\+out will be the number of bytes in the block
\end{DoxyItemize}

Returns other codes on error. 
\begin{DoxyParams}{Parameters}
{\em block\+\_\+id} & Block identifier \\
\hline
{\em block\+\_\+out} & Output block memory \\
\hline
{\em bytes\+\_\+out} & Bytes written to output \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classwirehair_1_1Codec_a4f4ec0f47c8c13478886033315700a03}\label{classwirehair_1_1Codec_a4f4ec0f47c8c13478886033315700a03}} 
\index{wirehair::Codec@{wirehair::Codec}!ReconstructOutput@{ReconstructOutput}}
\index{ReconstructOutput@{ReconstructOutput}!wirehair::Codec@{wirehair::Codec}}
\doxysubsubsection{\texorpdfstring{ReconstructOutput()}{ReconstructOutput()}}
{\footnotesize\ttfamily Wirehair\+Result wirehair\+::\+Codec\+::\+Reconstruct\+Output (\begin{DoxyParamCaption}\item[{void $\ast$G\+F256\+\_\+\+R\+E\+S\+T\+R\+I\+CT}]{message\+\_\+out,  }\item[{uint64\+\_\+t}]{message\+\_\+bytes }\end{DoxyParamCaption})}

\mbox{\hyperlink{classwirehair_1_1Codec_a4f4ec0f47c8c13478886033315700a03}{Reconstruct\+Output()}}

This function reconstructs the output by copying inputs that were from the first N blocks, and regenerating the rest. This is only done during decoding.

Precondition\+: \mbox{\hyperlink{classwirehair_1_1Codec_ac1e1e097b3bf9ea6b8d568af537d7868}{Decode\+Feed()}} has returned success 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
nimbro\+\_\+network/nimbro\+\_\+topic\+\_\+transport/contrib/wirehair/\mbox{\hyperlink{WirehairCodec_8h}{Wirehair\+Codec.\+h}}\item 
nimbro\+\_\+network/nimbro\+\_\+topic\+\_\+transport/contrib/wirehair/\mbox{\hyperlink{WirehairCodec_8cpp}{Wirehair\+Codec.\+cpp}}\end{DoxyCompactItemize}
